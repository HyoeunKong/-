2019-07-22 

##  개발보안1

**SQL 삽입(injection)**

외부 입력값을 쿼리 조작 문자열 포함 여부를 검증하지 않고 쿼리 작성 및 실행에 사용하는 경우, 쿼리의 구조와 의미가 변경되서 실행되는 것 

- 데이터베이스 또는 데이터에 대해 공격 → 권한 밖의 데이터를 조회, 수정, 삭제, 생성

- 서버에 대한 공격 → 데이터베이스가 동작하는 서버의 제어권을 획득해서 원격지에서 해당 서버를 제어

  

**XSS 공격 (Cross-Site Scripting)**

크로스사이트 스크립트(팅)

공격자가 전달한 스크립트 코드가 사용자 브라우져를 통해서 실행되는 것

- 브라우저에 저장된 또는 PC에 저장된 정보를 탈취
- 가짜 페이지를 만들고 사용자로 하여금 입력을 유도해서 입력값을 탈취
- 해당 PC의 제어권을 탈취해서 원격에서 제어 → 좀비화 ⇒ BeEF 

--------------------------------------------------------------------------------------------------------------------------------



<strong>동적웹페이지</strong>

- 사용자의 요청(요청파라미터=입력값=인자 )에따라 페이지가 바뀜

- 정적인 처리는 웹서버가 다른쪽으로 위임한다 웹어플리케이션 WAS

------------------------------------------------------------------------------------------------------------------------------------------



<strong>session</strong> 

- 클라이언트와 서버가 연결되어있다는것을 알려주는것

- 연결된 상태

- http는 stateless(connectionless  연결지향적이지 않다.) 라는 특징을 가지고 있다. 
- 연결이 계속되어있으면 알 수 있는데 기본적으로 주고받고나면 연결을 끊어버리니까 시간이지나서오는 요청과 처음 요청 간의 관계를 서버가 알기어렵고 그 관계를 이어주기 위해나온 개념이 쿠키 서버는 set-cookie라는 응답해더를 통해서 다음에 올때 가져올값을 정한다. 
- 쿠키 요청과 요청간의 관계를 이어주기위한것
- 위변조 조작이 가능하다 쉽게 유출 노출되고 변조가가능하다는 단점이있으니 이것을 서버가 가지고있는 자원에다가 어떤 정보를 담는다. 이 사용자가 어떤 조건을 자기를 증명할 수 있는 정보를 준다. 대표적으로 id,pw 

- 세션하이재킹을하는 이유는 서버를 속이기위해서

-------------------------------------------------------------------------------------------------------------------------------------------



<strong>입력값검증</strong>



입력값의 정상 여부를 확인하는 과정

예) ID 중복 체크 로직을 구현

\#1 입력화면

ID: 123 [체크]

\#2 사용자 입력을 요청 파라미터로 서버로 전달

http://.../check.jsp?id=123

\#3 요청 파라미터로 전달된 값은 서버 <u>내부 처리를 위해서 사용</u>

select * from users where id = 123



정상적인 데이터의 흐름

------------------------------------------------------------------------------------------------

입력값의 정상 여부를 확인하는 과정

예) ID 중복 체크 로직을 구현

\#1 입력화면

ID: 123  or 1=1[체크]

\#2 사용자 입력을 요청 파라미터로 서버로 전달

http://.../check.jsp?id=123 or 1=1

\#3 요청 파라미터로 전달된 값은 서버 <u>내부 처리를 위해서 사용</u>

select * from users where id = 123 or 1=1



전달과정에서 이렇게 바뀌는것을 막을 수 없다. 이러한것들이 사용되지 않도록해야한다.

이러한것들을 막기위해 기본적으로 입력데이터 검증을 해야한다.

모든값들은 제대로되었는지를 검증하고 사용해야한다.

-----------------------------------------------------------------------------------------------------------------------------

운영체제 명령어 삽입(Command Injection)- 쉘환경을 공격자에게 넘겨준다.

신뢰되지 않은 URL 주소로 자동 접속 연결(Open Redirect)-일반사용자들이 피싱 사이트로 자신도 모르게 넘어가도록 유도



<strong>에러처리가 제대로 되지 않으면</strong>

- 오류 메시지를 통한 정보노출
- 요류 상황 대응 부재 - >시스템장애, 잘못된방향으로 로직 동작
- 부적절한 예외 처리(오류에 대해서 대응을 잘 못하고있다.)

-------------------------------------------------------------------------------------------------------------------------------------

인증-내가 맞다는것을 검증하는과정 (나만이 알고있는것을 시스템에 제시해서 서버로 부터 인증받음)

인가(Authorization)-인증받은사용자가 어떤권한이 있다 없다. = 권한 = 접근통제

1)화면

2)기능

3)데이터

----------------------------------------------------------------------------------------------------------------------------------------

회원가입=패스워드생성시

복잡도체크 

패스워드 암호화저장




개발보안7(2019-07-30)



일반적으로 세션을 유지하는 인증을 쓰는것이 안전하다.



매요청시에 인증정보가 함께 전달되고 인증정보가 유출 될 수 있음



최초인증을 할때만 인증정보를 보내주고 그 이후에는 서버가주는 정보만으로 왔다리갔다리함



세션아이디는 웹어플리케이션에 따라 이름이 정해 져 있다.



세션아이디를 만들때는 추측되면 안된다.



URL 리다이렉트 

------------------------------------------------------------------------------------------------------------------------



**크로스 사이트 스크립팅(Cross-Site Scripting, XSS)**

크로스 사이트 스크립팅 취약점은 외부 입력값이 충분한 검증 없이 동적으로 생성되는 응답 페이지(사용자에게 보여지는 내용)에 사용되는 경우 발생한다.

<u>공격자가 전달한 스크립트 코드</u>가 사용자 브라우저를 통해서 실행되는 것

->사용자 브라우저 또는 사용자 PC의 정보를 탈취

->가짜 페이지를 만들어서 사용자로 하여금 추가 입력을 유도하고, 해당 정보를 탈취

->좀비화하여 원격에서 해당 PC를 조정 ->BeEF



**Reflective XSS (반사)**

공격자가 전달한 스크립트 코드가 취약한 웹 서버를 경유해서 사용자 브라우저에 전달되는 방식 --> 

입력값이 입력값 검증 또는 출력값 검증 없이  다음 화면 출력에 그대로 사용되는 경우에 발생

안녕!<%=request.getParameter("input")%>

<%

​	out.print("안녕!" + request.getParameter("input"));

%>

정상입출력: .../do.jsp?input=홍길동 ==> 안녕! 홍길동

비정상입출력:

.../do.jsp?input=\<script>alert(document.cookie)\</script> ->

안녕! \<script>alert(document.cookie)\</script>  ->해당 브라우저의 쿠키값이 출력

공격자의 스크립트 코드가 서버에저장되지 않는다 대신 스크립트코드가 경유지로서 사용된다.





--------------------------------------------------



**Stored XSS (저장)**

공격자가 작성한 스크립트 코드가 취약한 서버에 저장되어

<u>지속적으로</u> 사용자 브라우저로 내려가서 실행되는 것

​																								      (서버)

(공격자) 게시판 글쓰기   ----------------------------------------------->글저장

\<script>....\</script>											   \<script>....\</script>																								|

​																								|

(희생자) 게시판 글보기 -------------------------------------------- |

​					\<script>....\</script>	

스크립트코드가 안전하게 들어갈 수 있도록한다

글보기할때 데이터가 안전하게 출력되도록 한다 -> html 인코딩

서버가 가지고있는데이터가 화면에 그대로 나간다.(실행되는것 x /html 인코딩해서 내려보내면 가능)

<u>출력값을 인코딩해서 내 보내는것이 중요하다!</u>

---------------------



**DOM Based XSS**

개발자가 작성한 스크립트 코드의 취약점을 이용한 공격 기법

document.write(                            )

실행가능한 스크립트 태그가 있는지 확인하고 제거하던지 무력화시킨다. 또는 실행되지 않는 구조로 만들어 버린다. 들어가는값이 무조건 text로 인식 되도록

inner.text 처럼..ㅎㅎ

-----------------------------------------------------------

**why input validation is hard?**

공격자가 변형해서 입력하기 떄문에


2019-07-23

개발보안2

DLP: 데이터유출방지 Data Loss Prevention

DRM: 디지털 권리 관리 Digital rights management

SDL:보안을 고려한 개발 생명주기 Security Development Lifetime

----------------------------------------------------------------------------------------------------------------------------------------------------------



파일업로드 취약점

1)파일크기,종류제한 하지 않으면 업로드기능이 잘못 구현된것

파일크기- 용량문제 업로드된파일은 서버로 올라가고 임시적으로 그 파일은 해당서버에 남아있어야하는데 불필요한것을 지속적으로 올리면 서버의 스토리지(디스크)자원 고갈

서버의 연결자원이 고갈

​	->정상 서비스 방해 ->DoS

종류제한- 마음대로 서버를 핸들링할 수 있는 파일(server side script(SSS):PHP,JSP,ASP,JS) 을 서버에 올리면 서버 마음대로 조작가능

​	->서버의 제어권 탈취

클라이언트에서 실행되는 파일(악성코드가 포함되어있는)을 업로드

​	->악성코드에 유포지로 활용됨



2)외부 접근 가능 경로에 저장

->서버자원고갈->정상 서비스 방해 ->DoS

---------------------------------------------------------------------------------------------------------------------------------------------------------

패스워드

1)생성.변경

-영문자,숫자,특수문자 8자리 이상, 2가지 조합이면 10자리 이상

​	숫자8자리루 구성되어있는 패스워드는 10^8 시도하면 패스워드 찾을 수 있음

​	숫영특 8이면 (10+26x2+13)^*

-사전에 등록된 pw 사용금지

-규칙성 x

-개인정보x



2)저장(보관)

-해쉬:어떤값을 일정한 크기에 유일한 값으로 만드는것

고정길이,유일,단방향(일방)

a != b => H(a) != H(b)



비밀번호는 반드시 해쉬화 해야한다.

양방향:키를통해 암호화 복호화 가능

​					   암호화						

P			--------------------------> 	E

(평문)									(암호문)

​			 <---------------------------

​				      복호화				

​                          A					

​                       (KEY)

비도=보안강도: KEY를가지고 암호문을 알아내기 어려운정도(시간이 오래걸림)

128  2^128 만큼 시도해야 암호문을 알아낼 수 있다.





단방향

P ->pw -------------------------------->H(pw)

관리자가 정보를 빼가는것을 방지하기 위해 



3)관리정책

-패스워드 변경주기 

-패스워드 히스토리관리(사용했던 패스워드 사용하지 못하도록)

-최소사용기간 A->B->C->A  를 계속계속 쓸 수 있다. 그렇기때문에 최소사용기간을 둔다.

----------------------------------------------------------------------------------------------------------------------------------------------------------

Secure Coding 을 하기위한 기술



취약점 DB - CWE,CVE ,SANS TOP25,OWFSP TOP10

SecureCoding 가이드 - CERT,개발보안가이드

방법론 - MS-SDL, 7 touch point, CLASP

-----------------------------------------------------------------------------------------------------------------------------------------

기능의 특수문자

SQL ' # ; -              =>메타문자(의미)

URL ? & =

-------------------------------------------------------------------------------------------------------------------------------------------------------

특정 디렉터리에 존재하는 파일을 내려주는 서비스->파일 다운로드

.../download.jsp?filename=abc.gif



new file("/data/upload/" + filename);



.../download.jsp?filename=../../../../../../etc/passwd ->경로조작 

경로조작을 통해서 접근할 수 없는 디렉토리와 파일의 접근이 가능해지는것



형식 문자열

Format String

=출력 형식을 지정하는 문자

%s %c %n %b

형식 문자열 처리 함수를 사용 -> printf("%s",)



암호화																																	인코딩/디코딩

1) 안전한 알고리즘 => 비도 는 키길이에 비례한다. 일정수준이상의 비도를 유지할 수 있는 알고리즘

2) 키 길이 준수 => 

3) 키 보관 



id admin 

pw --------    --------------------------------------------->login.jsp?id=admin&pw=?

​			성공 <--------------------------------------------              인증시도 횟수제한

​			실패 																



------------------------------------------------------------------------------------------------------------------------------------------

해쉬 => 일정한크기, 유일한

"salt"  => 해쉬의 크래킹을 방어하기위해서 시스템 임의의 값

-----------------------------------------------------------------------------------------------------------------------------------------------------------

메타스플로잇

MSF

---------------------------------------------------------------------------------------------------------------------------------------------------------------



개발보안 방법론

​            코드리뷰 

정적 - 소스코드 형태 문법(구문)

white box                                            도구 

동적 - 실행파일 결과(값,성능,보안)

black box

​			디버깅 - 내가 원하는 결과가 나오는지 본다. 부하테스트- 해당하는 서비스가 일정 수준의 부하를 견디는지를 본다. 모의 해킹